(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();function d(s,t,r){if(!s.actors.has(t)||!s.actors.has(r))return null;const o=[[t,[]]],e=new Set;for(;o.length>0;){const[n,a]=o.shift();if(n===r)return a;if(!e.has(n)){e.add(n);const l=s.actors.get(n);for(const i of l.movies)for(const c of i.cast)e.has(c.name)||o.push([c.name,[...a,{actor:n,movie:i.title,nextActor:c.name}]])}}return null}class u{constructor(t){this.name=t,this.movies=new Set}addMovie(t){this.movies.add(t)}}class f{constructor(t){this.title=t,this.cast=new Set}addActor(t){this.cast.add(t),t.addMovie(this)}}class h{constructor(){this.actors=new Map,this.movies=new Map,this.TARGET_ACTOR="Tom Cruise"}addMovie(t){const r=new f(t.title);this.movies.set(t.title,r),t.cast.forEach(o=>{let e=this.actors.get(o);e||(e=new u(o),this.actors.set(o,e)),r.addActor(e)})}getPath(t){return d(this,t,this.TARGET_ACTOR)}}async function m(){try{const s=await fetch("./data.json");if(!s.ok)throw new Error("Failed to load movie data");const t=await s.json();if(!t||!Array.isArray(t.movies))throw new Error("Invalid movie data format");return await new Promise(r=>setTimeout(r,1500)),{success:!0,data:t.movies}}catch(s){return console.error("Error loading movie data:",s),{success:!1,error:`Unable to load movie database. ${s}`}}}function p(s,t){[...s.actors.keys()].filter(o=>o!==s.TARGET_ACTOR).sort().forEach(o=>{const e=document.createElement("option");e.value=o,e.textContent=o,t.appendChild(e)})}function y(s,t){if(!t||t.length===0)return null;const r=[`<span class="actor-name">${s}</span>`];return t.forEach((o,e)=>{const a=e===t.length-1?"⭐":"";r.push('<span class="path-arrow">→</span>',`<span class="movie-title">${o.movie}</span>`,'<span class="path-arrow">→</span>',`<span class="actor-name">${a}${o.nextActor}${a}</span>`)}),r.join(" ")}function v(s,t){const r=document.getElementById("result");if(!t.value){r.textContent="";return}const o=s.getPath(t.value),e=y(t.value,o);r.innerHTML=e||`No path found to ${s.TARGET_ACTOR}`}async function w(s){const t=document.getElementById("loading"),r=document.getElementById("error"),o=document.getElementById("search-container");if(!s.success){t.style.display="none",r.textContent=s.error,r.style.display="block";return}const e=s.data,n=document.getElementById("fromActorSelect");p(e,n),n.addEventListener("change",()=>v(e,n)),t.style.display="none",o.style.display="block"}async function E(){const s=await m();if(!s.success)return{success:!1,error:s.error};const t=new h;return s.data.forEach(r=>t.addMovie(r)),{success:!0,data:t}}async function A(){const s=await E();await w(s)}A();
